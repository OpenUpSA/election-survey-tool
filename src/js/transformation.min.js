module.exports = {
		xFormContent:function(json){
			var contents = [];

			var stringData = JSON.stringify(json);
			var data = JSON.parse(stringData);

			for(var i=0;i<=data.length-1;i++){
				var content = {
					id: data[i].id,
					type: data[i].type,
					content:data[i].acf.content
				};

				contents.push(content);
			}

      console.log(JSON.stringify(contents));

			return contents;
		},
		xFormFolders:function(json) {
		   var folders = [];

       var stringData = JSON.stringify(json);
			 var data = JSON.parse(stringData);

			 for(var i=0;i<=data.length-1;i++){
				 var questions = data[i].acf.questionaires;
				 var questionid = questions[0].questionaire;

				 var folder = {
					 id: data[i].id,
					 title:data[i].rendered,
					 icon: data[i].acf.icon,
					 questionare:questionid
				 };

				 folders.push(folder);
			 }

       console.log(JSON.stringify(folders));

			 return folders;
		},
		xFormQuestions:function(json){
				var questions = [];

				var stringData = JSON.stringify(json);
				var data = JSON.parse(stringData);

				for(var i=0;i<=data.length-1;i++){
					var question = {
						id: data[i].id,
						content: JSON.stringify(data[i].acf.questions),
					};

					questions.push(question);
				}

				console.log(JSON.stringify(questions));

				return questions;
		},
		mapToSurvey:function(folders,contents,questions){
			  var surveys = [];

				var foldersCollection = JSON.stringify(folders);
				var contentsCollection = JSON.stringify(contents);
				var questionCollection = JSON.stringify(questions);

				folders = JSON.parse(foldersCollection);
				contents = JSON.parse(contentsCollection);
				questions = JSON.parse(questionCollection);

				for(var i = 0;i<=folders.length-1;i++){
					var questionares = [];

					//Map Questions
					for(var j=0;j<=questions.length-1;j++){
						if(folders[i].questionare == questions[j].id){
							var questionare = {
								id:questions[j].id,
								questions: questions[j].content
							};

							questionares.push(questionare);
						}
					}

					var folder = {
						id:folders[i].id,
						icon: folders[i].icon,
						questionare: questionares
					}

					var survey = {
						folder:folder
					};

					surveys.push(survey);
				}

				localStorage.setItem('surveys',JSON.stringify(surveys));
		}
};
